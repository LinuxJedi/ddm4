# vim:ft=automake
# Copyright (C) 2012 Data Differential
# All rights reserved.
#
# Use and distribution licensed under the BSD license.  See
# the COPYING file in the parent directory for full text.
#
# included from Top Level Makefile.am
# All paths should be given relative to the root

LIBTOOL_COMMAND= ${abs_top_builddir}/libtool --mode=execute
GDB_COMMAND= $(LIBTOOL_COMMAND) gdb -f -x support/run.gdb

tests_main_c_SOURCES= tests/main_c.c
check_PROGRAMS+= tests/main_c
noinst_PROGRAMS+= tests/main_c

gdb-main_c: tests/main_c
	@$(GDB_COMMAND) tests/main_c

tests_main_cxx_SOURCES= tests/main_cxx.cc
check_PROGRAMS+= tests/main_cxx
noinst_PROGRAMS+= tests/main_cxx

gdb-main_cxx: tests/main_cxx
	@$(GDB_COMMAND) tests/main_cxx

tests_main_assert_SOURCES= tests/main_assert.cc
check_PROGRAMS+= tests/main_assert
noinst_PROGRAMS+= tests/main_assert

tests_pthread_check_SOURCES= tests/pthread_check.cc
tests_pthread_check_CXXFLAGS= @PTHREAD_CFLAGS@
tests_pthread_check_LDADD= @PTHREAD_LIBS@
tests_pthread_check_LDFLAGS= @MCHECK@
check_PROGRAMS+= tests/pthread_check
noinst_PROGRAMS+= tests/pthread_check

tests_event_SOURCES= tests/event.cc
tests_event_LDADD= @LIBEVENT_LIB@
check_PROGRAMS+= tests/event
noinst_PROGRAMS+= tests/event

tests_uuid_SOURCES= tests/uuid.cc
tests_uuid_LDADD= @LIBUUID_LIB@
check_PROGRAMS+= tests/uuid
noinst_PROGRAMS+= tests/uuid
